# 世外小学迁移需求反馈

[TOC]

### kubernetes集群

- kubernetes集群的稳定性可以得到保证

- 高可用需要添加多个master节点，需要增加部分物理服务器资源费用和多master管理成本。

- 关于自动升级kubernetes集群的功能，并不是必须的。原因如下：

  1、升级操作一年可能都不会进行一次，自动升级功能不会经常使用。

  2、平滑迁移，手动升级也可以完成这样的功能。

  3、自动升级随之而来的yaml脚本的变化，还需要世外小学运维人员评估和对于自己项目的风险预测。

  4、需要采购外部供应商的高额成本。

### 容器镜像服务

- 现状
  之前世外使用的是阿里云的免费的镜像仓库服务，如果想转到均瑶集团私有云的harbor仓库也可以，但是需要增加harbor仓库的维护费用和磁盘费用。

- 建议
  在考虑开支的情况下，建议优先考虑继续使用阿里云镜像仓库。

### 数据库、缓存、对象存储、网络存储

- 现状
  目前世外的数据库实际使用人数不到300人，对于这种体量而言，有关mysql数据库的高可用、自动备份等功能是不需要的。均瑶科创目前也没有全职的DBA。

- 建议
  如果一定需要增加这些功能。可能需要增加支付供应商技术支持费用。

### 网络

目前均瑶云提供的服务器属于私有云，没有VPC网络的概念。但是同一个资源池的网络都是局域网，相互打通了的。

### 监控

可以帮忙搭建Promethes监控，但是需要世外提出对于Prometheus监控的细则规划，例如prometheus开放的端口是nodeport还是services,可持续化存储的磁盘目录名称等相应参数。

### Openstack API

- openstack是九州云提供的收费服务产品，所以他们的API并不是完全公开的。
- 即使我们提高价格采购他们的API服务，世外的开发团队可能也不会在此API上做出二次开发。
建议可以审核这部分的采购费用是否有必要。

### 对象存储

之前了解到世外的磁盘需求量是20TB，换算成均瑶云的磁盘成本大约在1000元一个月左右，可以从成本上考虑是否有替换的需求。
均瑶云访问阿里云的OSS有连接超时的问题，需要有测试人员提高测试报告，才可以定论。因为目前均瑶APP项目已经部署在康桥机房的k8s里，使用的是均瑶科创自行开发的代码，经测试，并未发现访问超时的情况。

### 容灾

关于容灾与灾备的计划，均瑶云也可以做到多机房k8s集群备份，但是每增加一个容灾备份点，费用需要增加一倍。所以需要评审一下是否有这方面的需要。

并且世外之前在阿里云采购的k8s也是单机房的服务，并没有做k8s副本容灾的配置。



